<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tapkuang â€“ Vaiphei Dictionary</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #faf7f2; margin:0; padding:0; }
    header { text-align:center; background:#f5e6c9; padding:15px; }
    header h1 { margin:0; font-size:18px; }
    .credit { text-align:center; font-size:14px; font-weight:bold; color:#333; margin-top:8px; }
    .grid { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; padding:20px; }
    .card { background:white; padding:15px; border-radius:10px; text-align:center; box-shadow:0 2px 5px rgba(0,0,0,0.1); cursor:pointer; transition:transform 0.2s; }
    .card:hover { transform:scale(1.05); }
    section { display:none; padding:20px; }
    section.active { display:block; }
    input, button { padding:8px; margin:5px 0; }
    .word { margin:5px 0; padding:8px; background:#fff; border-radius:5px; }
    .letters button { margin:2px; padding:5px 10px; }
    .intro { background:#fff; margin:15px; padding:15px; border-radius:10px; font-size:14px; line-height:1.6; }
    footer { padding:12px; text-align:center; font-size:13px; color:#555; background:#f5e6c9; margin-top:20px; }
  </style>
</head>
<body>
  <header>
    <h1>Tapkuang â€“ Vaiphei Dictionary</h1>
    <div class="credit">By PH Thianneilal Vaiphei</div>
  </header>

  <!-- Home -->
  <section id="home" class="active">
    <div class="grid">
      <div class="card" onclick="showPage('home')">Home</div>
      <div class="card" onclick="showPage('searchVE')">Hawlna<br><small>Vaiphei â†’ English</small></div>
      <div class="card" onclick="showPage('searchEV')">Hawlna<br><small>English â†’ Vaiphei</small></div>
      <div class="card" onclick="document.getElementById('fileVE').click()">Excel laklutna<br><small>Import Vâ†’E</small></div>
      <div class="card" onclick="document.getElementById('fileEV').click()">Excel laklutna<br><small>Import Eâ†’V</small></div>
      <div class="card" onclick="exportExcel('VE')">Export Excel<br><small>Vâ†’E</small></div>
      <div class="card" onclick="exportExcel('EV')">Export Excel<br><small>Eâ†’V</small></div>
      <div class="card" onclick="showPage('addWord')">Thumal belapna<br><small>Add Word</small></div>
      <div class="card" onclick="login()">Lutna<br><small>Login</small></div>
      <div class="card" onclick="logout()">Pawtna<br><small>Logout</small></div>
    </div>

    <!-- Intro -->
    <div class="intro">
      <p>
        Tapkuang â€“ Vaiphei Dictionary App is the first of its kind. 
        It allows you to build Vaiphei â†” English vocabulary step by step.
      </p>
      <p>
        May this dictionary help all Vaipheis and learners of the language. 
        Suggestions and corrections are welcome. 
      </p>
    </div>
  </section>

  <!-- Search Vâ†’E -->
  <section id="searchVE">
    <h2>Search Vaiphei â†’ English</h2>
    <input type="text" id="searchBoxVE" placeholder="Type Vaiphei word..." oninput="doSearch('VE')">
    <div class="letters" id="lettersVE"></div>
    <div id="searchResultsVE"></div>
    <button onclick="showPage('home')">â¬… Back</button>
  </section>

  <!-- Search Eâ†’V -->
  <section id="searchEV">
    <h2>Search English â†’ Vaiphei</h2>
    <input type="text" id="searchBoxEV" placeholder="Type English word..." oninput="doSearch('EV')">
    <div class="letters" id="lettersEV"></div>
    <div id="searchResultsEV"></div>
    <button onclick="showPage('home')">â¬… Back</button>
  </section>

  <!-- Add Word Page -->
  <section id="addWord">
    <h2>Add Word</h2>
    <input type="text" id="vaipheiInput" placeholder="Vaiphei word"><br>
    <input type="text" id="englishInput" placeholder="English meaning"><br>
    <button onclick="saveWord('VE')">Save as Vâ†’E</button>
    <button onclick="saveWord('EV')">Save as Eâ†’V</button>
    <button onclick="showPage('home')">â¬… Back</button>
  </section>

  <!-- Hidden file inputs -->
  <input type="file" id="fileVE" accept=".xlsx,.xls" style="display:none" onchange="importExcel(event,'VE')">
  <input type="file" id="fileEV" accept=".xlsx,.xls" style="display:none" onchange="importExcel(event,'EV')">

  <footer>
    Â© Ph Thianneilal Vaiphei 2025
  </footer>

  <script>
    <script>
  // ... keep everything else the same above ...

  function displayResults(mode,results){
    let out=document.getElementById("searchResults"+mode);
    out.innerHTML="";
    if(results.length===0){ out.textContent="No results"; return; }

    results.forEach((w,i)=>{
      let div=document.createElement("div");
      div.className="word";
      let text=(mode==="VE") ? (w.vaiphei+" = "+w.english) : (w.english+" = "+w.vaiphei);
      div.innerHTML = text;

      // --- Edit button ---
      let editBtn=document.createElement("button");
      editBtn.textContent="âœŽ Edit";
      editBtn.style.marginLeft="10px";
      editBtn.onclick=()=>{
        if(!loggedIn){ alert("Login required"); return; }
        let newV=prompt("Vaiphei:", w.vaiphei);
        let newE=prompt("English:", w.english);
        if(mode==="VE"){
          dictionaryVE[i]={vaiphei:newV||w.vaiphei, english:newE||w.english};
          localStorage.setItem("dictionaryVE",JSON.stringify(dictionaryVE));
        } else {
          dictionaryEV[i]={english:newE||w.english, vaiphei:newV||w.vaiphei};
          localStorage.setItem("dictionaryEV",JSON.stringify(dictionaryEV));
        }
        doSearch(mode);
      };
      div.appendChild(editBtn);

      // --- Delete button ---
      let delBtn=document.createElement("button");
      delBtn.textContent="ðŸ—‘ Delete";
      delBtn.style.marginLeft="5px";
      delBtn.onclick=()=>{
        if(!loggedIn){ alert("Login required"); return; }
        if(confirm("Delete this word?")){
          if(mode==="VE"){
            dictionaryVE.splice(i,1);
            localStorage.setItem("dictionaryVE",JSON.stringify(dictionaryVE));
          } else {
            dictionaryEV.splice(i,1);
            localStorage.setItem("dictionaryEV",JSON.stringify(dictionaryEV));
          }
          doSearch(mode);
        }
      };
      div.appendChild(delBtn);

      out.appendChild(div);
    });
  }
</script>
</body>
</html>
